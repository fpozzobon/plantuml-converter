<!--@startuml

skinparam ActivityStartColor White
skinparam ActivityEndColor Red
skinparam ActivityStartBorderColor Black

skinparam note {
    BorderColor black
    BackgroundColor white
}

skinparam activity {
    BorderColor black
    BackgroundColor #ADD8DB
    EndColor black
    
}

skinparam activityDiamond {
    BorderColor black
    BackgroundColor #ADD8DB
}

start
-[#black]->
:Parse and Validate Command;
note right
  Slackbot
end note
-[#black]->
if (Valid?) then (no)
    -[#black]->
    :Send error message;
    -[#black]->
    end
else (yes)
    -[#black]->
    partition Deploy {
        note left
            Helm v3 Tillerless
        end note
        :Checkout repo;
        -[#black]->
        note right
            Github
        end note
        :Decrypt secrets;
        -[#black]->
        note right
            Sops
        end note
        :Deploy Umbrella Charts;
        -[#black]->
        note right
            Process Manager
            Hub Next
        end note
        
}
:Send response;
-[#black]->
end
partition "Cron Job Delete" {
    start
    -[#black]->
    note right
        Every 30 seconds
    end note
    :Check if any release exceeds time to live;
    -[#black]->
    :Delete outdated releases;
    -[#black]->
    end
}

endif

@enduml-->
![](http://www.plantuml.com/plantuml/png/~h0a736b696e706172616d2041637469766974795374617274436f6c6f722057686974650a736b696e706172616d204163746976697479456e64436f6c6f72205265640a736b696e706172616d2041637469766974795374617274426f72646572436f6c6f7220426c61636b0a0a736b696e706172616d206e6f7465207b0a20202020426f72646572436f6c6f7220626c61636b0a202020204261636b67726f756e64436f6c6f722077686974650a7d0a0a736b696e706172616d206163746976697479207b0a20202020426f72646572436f6c6f7220626c61636b0a202020204261636b67726f756e64436f6c6f7220234144443844420a20202020456e64436f6c6f7220626c61636b0a202020200a7d0a0a736b696e706172616d2061637469766974794469616d6f6e64207b0a20202020426f72646572436f6c6f7220626c61636b0a202020204261636b67726f756e64436f6c6f7220234144443844420a7d0a0a73746172740a2d5b23626c61636b5d2d3e0a3a506172736520616e642056616c696461746520436f6d6d616e643b0a6e6f74652072696768740a2020536c61636b626f740a656e64206e6f74650a2d5b23626c61636b5d2d3e0a6966202856616c69643f29207468656e20286e6f290a202020202d5b23626c61636b5d2d3e0a202020203a53656e64206572726f72206d6573736167653b0a202020202d5b23626c61636b5d2d3e0a20202020656e640a656c73652028796573290a202020202d5b23626c61636b5d2d3e0a20202020706172746974696f6e204465706c6f79207b0a20202020202020206e6f7465206c6566740a20202020202020202020202048656c6d2076332054696c6c65726c6573730a2020202020202020656e64206e6f74650a20202020202020203a436865636b6f7574207265706f3b0a20202020202020202d5b23626c61636b5d2d3e0a20202020202020206e6f74652072696768740a2020202020202020202020204769746875620a2020202020202020656e64206e6f74650a20202020202020203a4465637279707420736563726574733b0a20202020202020202d5b23626c61636b5d2d3e0a20202020202020206e6f74652072696768740a202020202020202020202020536f70730a2020202020202020656e64206e6f74650a20202020202020203a4465706c6f7920556d6272656c6c61204368617274733b0a20202020202020202d5b23626c61636b5d2d3e0a20202020202020206e6f74652072696768740a20202020202020202020202050726f63657373204d616e616765720a202020202020202020202020487562204e6578740a2020202020202020656e64206e6f74650a20202020202020200a7d0a3a53656e6420726573706f6e73653b0a2d5b23626c61636b5d2d3e0a656e640a706172746974696f6e202243726f6e204a6f622044656c65746522207b0a2020202073746172740a202020202d5b23626c61636b5d2d3e0a202020206e6f74652072696768740a20202020202020204576657279203330207365636f6e64730a20202020656e64206e6f74650a202020203a436865636b20696620616e792072656c6561736520657863656564732074696d6520746f206c6976653b0a202020202d5b23626c61636b5d2d3e0a202020203a44656c657465206f757464617465642072656c65617365733b0a202020202d5b23626c61636b5d2d3e0a20202020656e640a7d0a0a656e6469660a0a)







